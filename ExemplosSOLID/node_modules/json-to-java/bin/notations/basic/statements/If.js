"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const J2JError_1 = tslib_1.__importDefault(require("../../../utils/J2JError"));
const json_1 = require("../../../utils/json");
const QuickConsole_1 = tslib_1.__importDefault(require("../../../utils/QuickConsole"));
const Statement_1 = require("../Statement");
const Base_1 = tslib_1.__importDefault(require("./Base"));
class JavaStatementIf extends Base_1.default {
    constructor(currentIndent, json) {
        super(currentIndent);
        this.statements = [];
        this.else = null;
        this.nameWhenAsEmitter = 'If Statement';
        if ('condition' in json) {
            if (typeof json.condition === 'string') {
                this.condition = json.condition;
            }
            else {
                throw J2JError_1.default.typeError(this, 'condition', String);
            }
        }
        else {
            throw J2JError_1.default.fieldNotDefined(this, 'condition');
        }
        if ('statements' in json) {
            if (json_1.JsonUtil.isJsonArray(json.statements)) {
                Statement_1.parseJavaStatements(this.statements, json.statements, currentIndent + 1);
            }
            else {
                QuickConsole_1.default.warnIgnoreField(this, 'statements', Array);
            }
        }
        if ('else' in json) {
            if (json_1.JsonUtil.isJsonArray(json.else)) {
                this.else = [];
                Statement_1.parseJavaStatements(this.else, json.else, currentIndent);
            }
            else if (json_1.JsonUtil.isJsonObject(json.else)) {
                this.else = new JavaStatementIf(currentIndent, json.else);
            }
            else {
                // neither JsonObject nor JsonArray, unrecognizable type
                QuickConsole_1.default.warnIgnoreField(this, 'else', [Array, Object]);
            }
        }
    }
    toJavaStatement() {
        const rtn = [];
        rtn.push(`if (${this.condition}) {`);
        rtn.push(this.statements);
        if (this.else === null) {
            rtn.push('}');
        }
        else if (this.else instanceof JavaStatementIf) {
            rtn.push('} else');
            rtn.push(...this.else.toJavaStatement());
        }
        else {
            rtn.push('} else {');
            rtn.push(this.else);
            rtn.push('}');
        }
        return rtn;
    }
}
exports.default = JavaStatementIf;
